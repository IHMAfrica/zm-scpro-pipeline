# ===== SQL Server (source) =====
SQLSERVER_HOST=host.docker.internal
SQLSERVER_PORT=1433
SQLSERVER_DB=carepro
SQLSERVER_USER=airflow_user
SQLSERVER_PASSWORD=Tr@cK3RIHM_!2025
SQLSERVER_ENCRYPT=false
SQLSERVER_TDS_VERSION=7.3

# Incremental (optional)
INCREMENTAL=0
LOOKBACK_HOURS=24
ART_INC_COL=last_modified
INTERACTIONS_INC_COL=last_modified

# ===== Kafka (shared) =====
# We keep both names to satisfy any code using either.
KAFKA_BOOTSTRAP=kafka:9092
KAFKA_BOOTSTRAP_SERVERS=kafka:9092

# Security defaults get set by the DEV/PROD toggle at the bottom.
KAFKA_SECURITY_PROTOCOL=
KAFKA_SASL_MECHANISM=
KAFKA_SASL_USER=
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=

KAFKA_CLIENT_ID=carepro-producer
KAFKA_COMPRESSION_TYPE=snappy

KAFKA_TOPIC_ART=carepro.art_cohort
KAFKA_TOPIC_INTERACTIONS=carepro.all_interactions

# ===== Flink sink to Postgres =====
PG_HOST=postgres
PG_PORT=5432
PG_DB=carepro_messages
PG_USER=postgres
PG_PASSWORD=1234
PG_SSLMODE=disable

POSTGRES_DB=carepro_messages
POSTGRES_USER=postgres
POSTGRES_PASSWORD=1234
FLINK_PARALLELISM=2
FLINK_CHECKPOINT_INTERVAL_MS=60000

# ===== Producer tuning =====
BATCH_SIZE=5000
MAX_WORKERS=1

# ======= MODE SWITCH (pick ONE block) =======

# --- DEV (PLAINTEXT on 9092) ---
MODE=DEV
# leave KAFKA_BOOTSTRAP at kafka:9092
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
KAFKA_SASL_MECHANISM=
KAFKA_SASL_USER=
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=
SCHEMA_REGISTRY_SECURITY_PROTOCOL=PLAINTEXT
CONNECT_SECURITY_PROTOCOL=PLAINTEXT
CONNECT_SASL_MECHANISM=
CONNECT_SASL_JAAS_CONFIG=
SCHEMA_REGISTRY_SASL_MECHANISM=
SCHEMA_REGISTRY_SASL_JAAS_CONFIG=

# --- PROD-LIKE (SASL/SCRAM on 9093) ---
# MODE=PROD
# KAFKA_BOOTSTRAP=kafka:9093
# KAFKA_BOOTSTRAP_SERVERS=kafka:9093
# KAFKA_SECURITY_PROTOCOL=SASL_PLAINTEXT
# KAFKA_SASL_MECHANISM=SCRAM-SHA-512
# KAFKA_SASL_USER=flink
# KAFKA_SASL_USERNAME=flink
# KAFKA_SASL_PASSWORD=secret
# SCHEMA_REGISTRY_SECURITY_PROTOCOL=SASL_PLAINTEXT
# SCHEMA_REGISTRY_SASL_MECHANISM=SCRAM-SHA-512
# SCHEMA_REGISTRY_SASL_JAAS_CONFIG=org.apache.kafka.common.security.scram.ScramLoginModule required username=flink password=secret;
# CONNECT_SECURITY_PROTOCOL=SASL_PLAINTEXT
# CONNECT_SASL_MECHANISM=SCRAM-SHA-512
# CONNECT_SASL_JAAS_CONFIG=org.apache.kafka.common.security.scram.ScramLoginModule required username=flink password=secret;
